(function(t){function e(e){for(var a,r,o=e[0],c=e[1],u=e[2],l=0,v=[];l<o.length;l++)r=o[l],i[r]&&v.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);h&&h(e);while(v.length)v.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(a=!1)}a&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},i={app:0},s=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var h=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"395a":function(t,e,n){"use strict";var a=n("7d87"),i=n.n(a);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],r=(n("5c0b"),n("2877")),o={},c=Object(r["a"])(o,i,s,!1,null,null,null),u=c.exports,h=n("8c4f"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",staticClass:"home",class:{loading:t.loading}},[n("div",{staticClass:"text"},[t._m(0),n("h2",[t._v("a spotify visualizer ")]),n("button",{on:{click:t.auth}},[t._v("Login")])])])},v=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[n("i",[t._v("w")]),n("i",[t._v("a")]),n("i",[t._v("v")]),n("i",[t._v("e")]),n("i",[t._v("s")]),n("i",[t._v("y")]),n("i",[t._v("n")]),n("i",[t._v("c")])])}],d=(n("96cf"),n("3b8d")),f=(n("d263"),n("d225")),m=n("b0b4"),p=n("308d"),y=n("6bb5"),g=n("4e2b"),b=n("cebc"),k=(n("ac6a"),n("5df3"),n("768b")),w=n("75fc"),O=(n("cf6a"),n("7618"));function x(t){var e=Object(O["a"])(t);return null==t||"object"!=e&&"function"!=e}function _(t){var e=Object.seal(Object(b["a"])({},t)),n={__all__:[]};for(var a in e)n[a]=[];var i={set:function(t,e,a){var i;return i=x(t[e])?t[e]:Array.isArray(t[e])?Object(w["a"])(t[e]):Object(b["a"])({},t[e]),t[e]=a,n[e]&&(n[e].map(function(t){return t(a,i)}),n.__all__.map(function(t){return t(a,i)})),!0}};return new Proxy(Object(b["a"])({},e,{watch:function(t,e){"string"===typeof t&&t in n&&n[t].push(e),"function"===typeof t&&n.__all__.push(t)}}),{set:i.set})}n("28a5"),n("c5f6"),n("3b2b"),n("a481");function S(t){return t&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}function P(t,e,n,a,i,s){if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))return!1;var r="";if(n)switch(n.constructor){case Number:r=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:r="; expires="+n;break;case Date:r="; expires="+n.toUTCString();break}return document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+r+(i?"; domain="+i:"")+(a?"; path="+a:"")+(s?"; secure":""),!0}function j(t,e,n,a){var i=new XMLHttpRequest;for(var s in i.open(t,e,n),a)i.setRequestHeader(s,a[s]);return i}function C(t){return{request:t,status:t.status,data:function(){try{var e=JSON.parse(t.responseText);return e}catch(n){return t.responseText}}()}}function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.async,a=void 0===n||n,i=e.headers,s=void 0===i?{}:i;return new Promise(function(e,n){var i=j("GET",t,a,s),r=function(){var t=C(i);t.success=!1,t.error=i.responseText,n(t)};i.onload=function(){if(i.status>=200&&i.status<400){var t=C(i);t.success=!0,e(t)}i.status>=400&&r(i)},i.onerror=function(){return r(i)},i.send()})}function F(t,e){return function(n){return t*(1-n)+e*n}}var T=n("ce24"),E=n("bc17"),A={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function R(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"easeInOutQuint",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!A[e])throw new Error('Unknown easing function "'.concat(e,'"'));for(var a=Math.min(Math.max(0,t),1),i=A[e](a),s=0;s<n;s++)i+=a;return i/(n+1)}var M=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.volumeSmoothing,i=void 0===a?100:a,s=n.pingDelay,r=void 0===s?2500:s,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(f["a"])(this,t);var c=S("SPOTIFY_ACCESS_TOKEN"),u=S("SPOTIFY_REFRESH_TOKEN"),h=S("SPOTIFY_REFRESH_CODE");this.state=_({api:{currentlyPlaying:"https://api.spotify.com/v1/me/player",trackAnalysis:"https://api.spotify.com/v1/audio-analysis/",trackFeatures:"https://api.spotify.com/v1/audio-features/",tokens:{accessToken:c,refreshToken:u,refreshCode:h},headers:{Authorization:"Bearer "+c,Accept:"application/json"},pingDelay:r},intervalTypes:["tatums","segments","beats","bars","sections"],activeIntervals:_({tatums:{},segments:{},beats:{},bars:{},sections:{}}),currentlyPlaying:{},trackAnalysis:{},trackFeatures:{energy:.2},initialTrackProgress:0,initialStart:0,trackProgress:0,active:!1,noPlayback:null,initialized:!1,volumeSmoothing:i,volume:0,queues:{volume:[],beat:[]}}),this.initHooks(),!0===o?setTimeout(function(){e.state.trackAnalysis=e.buildStaticIntervals(),e.state.active=!0,requestAnimationFrame(e.tick.bind(e))},300):this.ping()}return Object(m["a"])(t,[{key:"initHooks",value:function(){var t=this;this.hooks={tatum:function(){},segment:function(){},beat:function(){},bar:function(){},section:function(){}},this.state.activeIntervals.watch("tatums",function(e){return t.hooks.tatum(e)}),this.state.activeIntervals.watch("segments",function(e){return t.hooks.segment(e)}),this.state.activeIntervals.watch("beats",function(e){return t.hooks.beat(e)}),this.state.activeIntervals.watch("bars",function(e){return t.hooks.bar(e)}),this.state.activeIntervals.watch("sections",function(e){return t.hooks.section(e)})}},{key:"ping",value:function(){var t=this;setTimeout(function(){return t.getCurrentlyPlaying()},this.state.api.pingDelay)}},{key:"getNewToken",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.state.api.tokens.refreshToken||(window.location.href="/"),t.next=3,I("".concat("http://localhost:8001","/refresh?token=").concat(this.state.api.tokens.refreshToken));case 3:e=t.sent,n=e.data,P("SPOTIFY_ACCESS_TOKEN",n.access_token),this.state.api.tokens.accessToken=n.access_token,this.state.api.headers={Authorization:"Bearer "+this.state.api.tokens.accessToken,Accept:"application/json"},this.ping();case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"getCurrentlyPlaying",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark(function t(){var e,n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I(this.state.api.currentlyPlaying,{headers:this.state.api.headers});case 3:if(e=t.sent,n=e.data,n&&n.is_playing){t.next=9;break}return!0===this.state.active&&(this.state.active=!1),!0!==this.state.noPlayback&&(this.state.noPlayback=!0),t.abrupt("return",this.ping());case 9:this.processResponse(n),t.next=17;break;case 12:if(t.prev=12,t.t0=t["catch"](0),a=t.t0.status,401!==a){t.next=17;break}return t.abrupt("return",this.getNewToken());case 17:case"end":return t.stop()}},t,this,[[0,12]])}));function e(){return t.apply(this,arguments)}return e}()},{key:"processResponse",value:function(t){var e=JSON.stringify(t.item)===JSON.stringify(this.state.currentlyPlaying);if(!1===this.state.initialized||!e||!1===this.state.active)return this.getTrackInfo(t);this.ping()}},{key:"getTrackInfo",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark(function t(e){var n,a,i,s,r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=window.performance.now(),t.next=3,Promise.all([I(this.state.api.trackAnalysis+e.item.id,{headers:this.state.api.headers}).then(function(t){return t.data}),I(this.state.api.trackFeatures+e.item.id,{headers:this.state.api.headers}).then(function(t){return t.data})]);case 3:a=t.sent,i=Object(k["a"])(a,2),s=i[0],r=i[1],this.state.intervalTypes.forEach(function(t){var n=s[t];n[0].duration=n[0].start+n[0].duration,n[0].start=0,n[n.length-1].duration=e.item.duration_ms/1e3-n[n.length-1].start,n.forEach(function(t){t.loudness_max_time&&(t.loudness_max_time=1e3*t.loudness_max_time),t.start=1e3*t.start,t.duration=1e3*t.duration})}),o=window.performance.now()-n,this.state.currentlyPlaying=e.item,this.state.trackAnalysis=s,this.state.trackFeatures=r,this.state.initialTrackProgress=e.progress_ms+o,this.state.trackProgress=e.progress_ms+o,this.state.initialStart=window.performance.now(),!1===this.state.initialized&&(requestAnimationFrame(this.tick.bind(this)),this.state.initialized=!0),!1===this.state.active&&(this.state.active=!0),!0===this.state.noPlayback&&(this.state.noPlayback=!1),this.ping();case 19:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"setActiveIntervals",value:function(){var t=this,e=function(e){for(var n=t.state.trackAnalysis[e],a=t.state.trackProgress,i=0;i<n.length;i++){if(i===n.length-1)return i;if(n[i].start<a&&a<n[i+1].start)return i}};this.state.intervalTypes.forEach(function(n){var a=e(n);t.state.activeIntervals[n].start&&a===t.state.activeIntervals[n].index||(t.state.activeIntervals[n]=Object(b["a"])({},t.state.trackAnalysis[n][a],{index:a}));var i=t.state.activeIntervals[n],s=i.start,r=i.duration,o=t.state.trackProgress-s;t.state.activeIntervals[n].elapsed=o,t.state.activeIntervals[n].progress=R(o/r)})}},{key:"getVolume",value:function(){var t=this.state.activeIntervals.segments,e=t.loudness_max,n=t.loudness_start,a=t.loudness_max_time,i=t.duration,s=t.elapsed,r=t.start,o=t.index;if(!this.state.trackAnalysis.segments[o+1])return 0;var c=this.state.trackAnalysis.segments[o+1].loudness_start,u=r+s;if(s<a){var h=Math.min(1,s/a);return F(n,e)(h)}var l=r+a,v=u-l,d=i-a,f=Math.min(1,v/d);return F(e,c)(f)}},{key:"watch",value:function(t,e){this.state.watch(t,e)}},{key:"on",value:function(t,e){this.hooks[t]=e}},{key:"getInterval",value:function(t){return this.state.activeIntervals[t+"s"]}},{key:"tick",value:function(t){if(requestAnimationFrame(this.tick.bind(this)),this.state.active){this.state.trackProgress=t-this.state.initialStart+this.state.initialTrackProgress,this.setActiveIntervals();var e=this.getVolume(),n=this.state.queues;n.volume.unshift(e),n.volume.length>400&&n.volume.pop(),n.beat.unshift(e),n.beat.length>this.state.volumeSmoothing&&n.beat.pop();var a=Object(T["b"])().domain([Object(E["d"])(n.volume),s(n.volume)]).range([0,1]),i=s(n.beat);this.volume=a(i)}function s(t){return t.reduce(function(t,e){return t+e})/t.length}}},{key:"buildStaticIntervals",value:function(){var t={},e=3e3,n={beats:e,tatums:[.666*e,.333*e],segments:e/2,sections:16*e,bars:4*e},a=["tatums","segments","beats","bars","sections"];return a.forEach(function(a){t[a]=[];for(var i=0;i<1e4;i++){var s=t.tatums[i-1]?t.tatums[i-1].start+t.tatums[i-1].duration:0,r=i%2===0?n.tatums[0]:n.tatums[1];t[a].push({start:"tatums"===a?s:i*n[a],duration:"tatums"===a?r:n[a],loudness_start:i*i,loudness_max:i*i,loudness_max_time:e/2/1e3})}}),t}},{key:"isActive",get:function(){return!0===this.state.active}}]),t}(),q=(n("7f7f"),function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.main,i=void 0===a?null:a,s=n.container,r=void 0===s?document.body:s,o=n.hidpi,c=void 0===o||o;Object(f["a"])(this,t),this.container=r,this.hidpi=c,this.active=!1,this.queue=[],this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.container.appendChild(this.canvas),this.setSize(),window.addEventListener("resize",function(){e.setSize()}),null!==i&&this.add("main",i)}return Object(m["a"])(t,[{key:"setSize",value:function(){var t=this.hidpi?window.devicePixelRatio:1;this.width=window.innerWidth,this.height=window.innerHeight,this.canvas.width=this.width*t,this.canvas.height=this.height*t,this.canvas.style.transformOrigin="top left",this.canvas.style.transform="scale(".concat(1/t,")"),this.ctx.scale(t,t)}},{key:"add",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.queue.push({name:t,method:e,duration:n,start:window.performance.now()})}},{key:"remove",value:function(t){this.queue=this.queue.filter(function(e){return e.name!==t})}},{key:"start",value:function(){!0!==this.active&&(this.active=!0,requestAnimationFrame(this.loop.bind(this)))}},{key:"stop",value:function(){!1!==this.active&&(this.active=!1,cancelAnimationFrame(this.loop.bind(this)))}},{key:"paint",value:function(t,e){var n=e.name,a=e.start,i=e.duration,s=e.method,r=t-a,o="number"===typeof i?Math.min(r/i,1):null,c={ctx:this.ctx,width:this.width,height:this.height,now:t,progress:o,duration:i,elapsed:r,start:a};s(c),1===o&&this.remove(n)}},{key:"loop",value:function(t){var e=this;!0===this.active&&requestAnimationFrame(this.loop.bind(this)),this.queue.forEach(function(n){return e.paint(t,n)})}}]),t}()),z=function(){function t(e){var n=e.volumeSmoothing,a=void 0===n?100:n,i=e.hidpi,s=void 0===i||i,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(f["a"])(this,t),this.sync=new M({volumeSmoothing:a},r),this.sketch=new q({main:this.paint.bind(this),hidpi:s}),this.watch(),this.hooks()}return Object(m["a"])(t,[{key:"watch",value:function(){var t=this;this.sync.watch("active",function(e){!0===e?t.sketch.start():t.sketch.stop()})}},{key:"hooks",value:function(){}},{key:"paint",value:function(){}}]),t}(),$=n("a43d"),N=n("482f"),Q=2*Math.PI,L=Math.PI/180,D=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.fixed,i=void 0!==a&&a;return Object(f["a"])(this,e),t=Object(p["a"])(this,Object(y["a"])(e).call(this,{volumeSmoothing:75,hidpi:!1},i)),t.theme=[Object(N["a"])("#FFE66D"),Object(N["a"])("#4ECDC4"),Object(N["a"])("#FF6B6B"),Object(N["a"])("#292F36")],t.overlayColors=[Object(N["a"])("#18FF2A"),Object(N["a"])("#7718FF"),Object(N["a"])("#06C5FE"),Object(N["a"])("#FF4242"),Object(N["a"])("#18FF2A")].map(function(t){var e=t.r,n=t.g,a=t.b;return"rgba(".concat(e,", ").concat(n,", ").concat(a,", 1)")}),t.setGradients(),t.setCtxParams(),t.setScales(),t.watch(),window.addEventListener("resize",function(){t.setGradients(),t.setCtxParams()}),t.sync.watch("trackFeatures",function(){t.sync.state.volumeSmoothing=t.smoothingScale(t.sync.state.trackFeatures.energy)}),t}return Object(g["a"])(e,t),Object(m["a"])(e,[{key:"setGradients",value:function(){var t=this.sketch.height>this.sketch.width?this.sketch.height/2:this.sketch.width/2,e={x:this.sketch.width/2,y:this.sketch.height/2};this.gradient=this.sketch.ctx.createRadialGradient(e.x,e.y,0,e.x,e.y,t),this.gradient.addColorStop(0,this.theme[0]),this.gradient.addColorStop(.5,this.theme[1]),this.gradient.addColorStop(1,this.theme[0]),this.gradient2=this.sketch.ctx.createRadialGradient(e.x,e.y,0,e.x,e.y,t/3),this.gradient2.addColorStop(0,this.theme[0]),this.gradient2.addColorStop(.5,this.theme[1]),this.gradient2.addColorStop(1,this.theme[0]),this.gradient3=this.sketch.ctx.createRadialGradient(e.x,e.y,0,e.x,e.y,t),this.gradient3.addColorStop(0,this.theme[2]),this.gradient3.addColorStop(1,this.theme[0])}},{key:"setCtxParams",value:function(){this.sketch.ctx.lineCap="round",this.sketch.ctx.lineJoin="round"}},{key:"setScales",value:function(){this.rotationScale=Object(T["a"])().domain([0,1]).range([3e3,800]),this.radiusScale=Object(T["a"])().domain([0,.3,.6,1]).range([.5,1,1.1,1.2]),this.smoothingScale=Object(T["a"])().domain([0,1]).range([100,30])}},{key:"createPath",value:function(t,e){var n=e.x,a=e.y,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;t.beginPath();for(var s=0;s<i*Q;s+=L){var r=n(s),o=a(s);0===s?t.moveTo(r,o):t.lineTo(r,o)}}},{key:"paintBackground",value:function(t){var e=t.ctx,n=t.width,a=t.height;this.sketch.ctx.fillStyle=this.gradient3,e.fillRect(0,0,n,a)}},{key:"paintOuterLines",value:function(t){var e=this,n=t.ctx,a=t.width,i=t.height,s=t.now,r=this.sync.getInterval("beat"),o=r.progress,c=a>i?a/10:i/10,u=Object($["b"])([this.sync.volume*-c,this.sync.volume*c,this.sync.volume*-c]),h=u(o)*this.radiusScale(this.sync.state.trackFeatures.energy)/2,l=a>i?this.sync.volume*i/3:this.sync.volume*a/3,v=function(t){return(l+h*Math.sin(7*(t+s/e.rotationScale(e.sync.state.trackFeatures.energy))))*Math.tan(t)+a/2},d=function(t){return(l+h*Math.sin(7*(t+s/e.rotationScale(e.sync.state.trackFeatures.energy)/2)))*Math.cos(t)+i/2};this.createPath(n,{x:v,y:d}),n.lineWidth=5*this.sync.volume,n.strokeStyle=this.gradient,n.stroke(),n.fillRect(0,i/2-20*this.sync.volume,a,40*this.sync.volume)}},{key:"paintInnerLines",value:function(t){var e=this,n=t.ctx,a=t.width,i=t.height,s=t.now,r=this.sync.getInterval("bar"),o=r.progress,c=Object($["b"])([this.sync.volume*(i/5),this.sync.volume*(i/5)])(o),u=a>i?this.sync.volume*i/3:this.sync.volume*a/3,h=function(t){return(u+c*Math.sin(2.019*(t+s/e.rotationScale(e.sync.state.trackFeatures.energy)*8)))*Math.cos(t)+a/2},l=function(t){return(u+c*Math.sin(2.019*(t+s/e.rotationScale(e.sync.state.trackFeatures.energy)*4)))*Math.sin(t)+i/2};this.createPath(n,{x:h,y:l},15),n.lineWidth=Math.min(this.sync.volume,1),n.strokeStyle=this.gradient2,n.stroke()}},{key:"paintCenter",value:function(t){var e=this,n=t.ctx,a=t.width,i=t.height,s=t.now,r=this.sync.getInterval("beat"),o=r.progress,c=a>i?a/10:i/10,u=Object($["b"])([this.sync.volume*-c,this.sync.volume*c,this.sync.volume*-c]),h=u(o)*this.radiusScale(this.sync.state.trackFeatures.energy),l=a>i?this.sync.volume*i/3:this.sync.volume*a/3,v=function(t){return(l+.5*h*Math.sin(7*(t+s/e.rotationScale(e.sync.state.trackFeatures.energy)*4)))*Math.cos(t)+a/2},d=function(t){return(l+.5*h*Math.sin(7*(t+s/e.rotationScale(e.sync.state.trackFeatures.energy))))*Math.sin(t)+i/2},f=Object($["b"])([this.sync.volume*(a>i?a:i)/50,this.sync.volume,this.sync.volume*(a>i?a:i)/50]);this.createPath(n,{x:v,y:d}),n.lineWidth=f(o),n.strokeStyle=this.gradient,n.stroke()}},{key:"paintOverlay",value:function(t){var e=t.ctx,n=t.width,a=t.height,i=t.now;this.backgroundTick||(this.backgroundTick=i);var s=Math.min((i-this.backgroundTick)/1e4,1);e.save(),e.globalCompositeOperation="overlay",e.fillStyle=Object($["d"])(this.overlayColors)(s),e.fillRect(0,0,n,a),e.restore(),1===s&&(this.backgroundTick=i)}},{key:"paint",value:function(t){this.paintBackground(t),this.paintOuterLines(t),this.paintInnerLines(t),this.paintCenter(t),this.paintOverlay(t)}}]),e}(z),G={data:function(){return{loading:!1}},methods:{auth:function(){var t=Object(d["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,I("".concat("http://localhost:8001","/auth"));case 2:e=t.sent,n=e.data,this.loading=!0,this.$refs.container.addEventListener("animationend",function(){window.location.href="".concat("http://localhost:8001","/login?auth_id=").concat(n.auth_id)});case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.wavesync=new D({fixed:!0})}},H=G,B=(n("395a"),Object(r["a"])(H,l,v,!1,null,"59f5c9a4",null)),J=B.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"visualizer"},[n("Status",{attrs:{loaded:t.loaded,noPlayback:t.noPlayback}}),n("NowPlaying",{attrs:{nowPlaying:t.nowPlaying}})],1)},W=[],Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"status"},[n("div",{staticClass:"loading msg",class:{visible:!t.loaded}},[n("h2",[t._v("loading, one moment please")])]),n("div",{staticClass:"no-playback msg",class:{visible:t.noPlayback}},[n("h2",[t._v("no playback detected")])])])},K=[],V={props:["loaded","noPlayback"]},X=V,Z=(n("dd1b"),Object(r["a"])(X,Y,K,!1,null,null,null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"now-playing",class:{visible:t.visible}},[n("img",{attrs:{src:t.image}}),n("div",{staticClass:"text",style:{color:t.color||"black"}},[n("div",{staticClass:"name"},[t._v(t._s(t.name))]),n("div",{staticClass:"artist"},[t._v(t._s(t.artist))])])])},nt=[],at={props:["nowPlaying","color"],data:function(){return{delay:4e3,visible:!1,image:"",name:"",artist:""}},watch:{nowPlaying:function(t){var e=this,n=this.getCurrentlyPlaying(t);n?(this.image=n.image,this.artist=n.artist,this.name=n.name,this.visible=!0,setTimeout(function(){return e.visible=!1},this.delay)):this.visible=!1}},methods:{getCurrentlyPlaying:function(t){var e=t.name||!1,n=t.album,a=!!n&&n.images[1].url,i=n?n.artists[0].name:"";return!1!==a&&{name:e,image:a,artist:i}}}},it=at,st=(n("7646"),Object(r["a"])(it,et,nt,!1,null,"5c1012c9",null)),rt=st.exports,ot={components:{Status:tt,NowPlaying:rt},data:function(){return{loaded:!1,noPlayback:!1,nowPlaying:{image:"",name:"",artist:""}}},mounted:function(){var t=this;this.waveSync=new D,this.waveSync.sync.watch("active",function(){return t.loaded=!0}),this.waveSync.sync.watch("noPlayback",function(e){return t.noPlayback=e}),this.waveSync.sync.watch("currentlyPlaying",function(e){t.nowPlaying=e})}},ct=ot,ut=Object(r["a"])(ct,U,W,!1,null,null,null),ht=ut.exports;a["a"].use(h["a"]);var lt=new h["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:J},{path:"/visualizer",name:"about",component:ht}]});a["a"].config.productionTip=!1,new a["a"]({router:lt,render:function(t){return t(u)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var a=n("5e27"),i=n.n(a);i.a},"5e27":function(t,e,n){},"61ce":function(t,e,n){},"69fe":function(t,e,n){},7646:function(t,e,n){"use strict";var a=n("69fe"),i=n.n(a);i.a},"7d87":function(t,e,n){},dd1b:function(t,e,n){"use strict";var a=n("61ce"),i=n.n(a);i.a}});
//# sourceMappingURL=app.4a4fd94e.js.map